<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<link rel="stylesheet" href="stylesheets/application.css">
	<title>Milog</title>
</head>
<body class="edit-post">
	<!-- 导航栏 -->
	<nav class="navbar navbar-default">
		<div class="container-fluid">
			<!-- 导航栏首部 -->
			<div class="navbar-header">
			    <!-- Logo -->
					<a href="/" class="navbar-brand">
						 <img class="logo" src="images/logo.png" alt="Milog">
					</a>
					<!-- 切换语系  屏幕<=420px时隐藏-->
					<a class="navbar-text switch-lang" href="#">EN</a>
					<!-- 展开菜单项Btn -->
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#collapse-nav">
	  			  <span class="icon-bar"></span>
	  			  <span class="icon-bar"></span>
	  			  <span class="icon-bar"></span>
	  			</button>
			</div>

			<!-- 下拉菜单项 小屏时不显示 -->
			<ul class="nav navbar-nav navbar-right navbar-footer drop-nav" >
				<!-- 新建类操作菜单 -->
				<li class="dropdown dropdown-opt">
					 	<a class="dropdown-toggle" data-toggle="dropdown" role="button" >
					 		<span class="glyphicon glyphicon-plus"></span>
        			<span class="caret"></span>
        		</a>
			      <ul class="dropdown-menu">
			        	<li><a href="edit_post.html">写文章</a></li>
			      </ul>
				</li>
				<!-- 设置类操作菜单 -->
				<li class="dropdown dropdown-setting">
					 	<a class="dropdown-toggle" data-toggle="dropdown" role="button" >
					 		<div class="default-avatar" >K</div>
        			<span class="caret"></span>
        		</a>
			      <ul class="dropdown-menu">
			        	<li><a href="#">Kumho</a></li>
			          <li><div class="divider"></div></li>
			          <li><a href="#">个人资料设置</a></li> 
			          <li><a href="#">博客设置</a></li> 
			          <li><a href="#">我的草稿</a></li> 
			          <li><div class="divider"></div></li>
								<li><a id="logout" href="#">退出</a></li>
			      </ul>
				</li>
			</ul>
		
			<!-- 登录注册 -->
			<div class="navbar-right navbar-footer login-group" style="display: none;">
				<a class="navbar-text" href="signup.html">注册</a>
				<a class="navbar-text" href="signin.html">登录</a>
			</div>
			
			<!-- 主菜单项 -->
			<div class="collapse navbar-collapse" id="collapse-nav">
					<ul class="nav navbar-nav navbar-center main-nav">
						<li><a href="home.html">首页</a></li>
						<li><a href="category.html">分类</a></li>
						<li><a href="archive.html">归档</a></li>
						<li><a href="aboutme.html">关于</a></li>
						<li><a href="#">搜索</a></li>
					</ul>
			</div>

		</div>
	</nav>

	<!-- 内容区域 -->
	<div class="mainer">
		<div class="container-fluid">
			<!-- 居中 -->
			<div class="col-md-9 col-center-block content-wrap" >
					<div class="edit-post">
							<form id="post-form" action="#" method="post">
									<!-- 编辑页头部 -->
									<div class="edit-header">
										 <!-- 文章标题 居左 -->
										 <div class="post-title">
										 				<div class="form-group">
										 					<input id="title-input" type="text" class="form-input" name="post[title]" placeholder="在这里填入文章标题">
										 				</div>
										 </div>
										 <!-- 文章分类 居右 -->
										 <div class="dropdown post-category">
										 					分类： 
										 		<!-- 表单获取分类值 -->
										 		<input id="post-selected-category-input" type="hidden" class="form-input" name="post[category]" value="默认">
												<span data-toggle="dropdown" role="button">
													  <span id="post-selected-category" >默认</span>
														<span class="caret" ></span>
												</span>
												<!-- 分类菜单，同时新建分类 -->
												<ul class="dropdown-menu post-category-menu">
										      <li class="category-item li-active"><a><span class="content">默认</span></a></li>
										      <li class="category-item"><a><span class="content">工作日志</span></a></li>
										      <li class="category-item"><a><span class="content">学习</span></a></li>
										      <!-- 用户创建分类，可删除 -->
										      <li class="category-item">
										      	  <a><span class="content">Linux</span><span class="delete" role="button">x</span></a>
										      </li>
										      <li class="category-item">
										      	  <a><span class="content">数据</span><span class="delete" role="button">x</span></a>
										      </li>
										      <li id="category-item-add-li"><a><input type="text" id="category-item-add" maxlength="8" placeholder="新的分类/回车确认"></a>
										      </li>
										      <div class="error-tips" style="display: none;">文章分类名"工作日志"已经存在，请换一个</div>
										    </ul>
										 </div>
									</div>
									<!-- 编辑框部分 -->
									<!-- 编辑区节点使用类edit-body-node标识,其中preivew-node/edit-node来区分编辑或预览部分 -->
									<div class="edit-body">
											<!-- 标签卡与工具栏 -->
											<div class="edit-body-header">
													<!-- 工具栏 -->
													<div class="post-edit-toolbar pull-right">
															<!-- markdown工具栏  -->
															<div class="mardown-toolbar"></div>
													</div>
													<!-- 标签卡 -->
													<ul class="nav nav-tabs" id="edit-tabs">
														<li class="active"><a class="edit-body-node edit-node" href="#edit-content" data-toggle="tab">编辑</a></li>
														<li><a class="edit-body-node preview-node" href="#preview-content" data-toggle="tab">预览</a></li>
													</ul>

											</div>
											<!-- 编辑/预览区 -->
											<div class="tab-content edit-body-cotent" id="tab-content">
													<div class="tab-pane fade in active" id="edit-content">
															<textarea class="tabIndent edit-body-node edit-node" name="post[content]" id="editor"></textarea>
													</div>
													<div class="tab-pane fade" id="preview-content">
															<div class="edit-body-node preview-node" id="previewer" ></div>
													</div>
											</div>
									</div>
									<!-- 标签选择与提交 -->
									<div class="edit-footer">
											<!-- 填如标签,最多5个标签 -->
											<div class="form-group tabs-input">
													<input id="tab-input" class="form-input" type="text" name="post[tags]" placeholder="请输入关键字, 用逗号隔开, 最多5个">
													<span >标签: </span>
											</div>
											<!-- 提交按钮 -->
											<div class="form-group post-btns" >
													<button class="save-btn" data-style="slide-up" type="submit">保存草稿</button>
													<button class="post-btn" data-style="slide-up" type="submit">发布文章</button>
											</div>
									</div>
							</form>
					</div>
			</div>
		</div>
	</div>

  <!-- footer -->
  <footer id="footer" class="text-muted">
	  	<div class="container">
	  			<span class="site-footer-info">  © 2016 hikumho. Powered by Rails. </span>
	  			<span class="site-footer-links">
	  				<a href="https://www.github.com/hikumho">Github</a> | 
	  				<a href="mailto:hi.jinhu.zhang@gmail.com">Email</a>
	  			</span>
	  	</div>
	</footer>

		<!-- 返回页面顶部 -->
	<div class="back-to-top">
		<span class="glyphicon glyphicon-chevron-up"></span>
	</div>

	<script src="lib/javascripts/jquery-3.1.1.min.js"></script>
	<script src="lib/javascripts/bootstrap.min.js"></script>
	<script src="lib/javascripts/velocity.min.js"></script>
	<script src="lib/javascripts/tabIndent.js"></script>
	<script src="lib/javascripts/markdown-it.min.js"></script>
	<script src="lib/javascripts/highlight.pack.js"></script>  
	<script>hljs.initHighlightingOnLoad(); //支持语法高亮 </script>
	<script src="javascripts/application.js"></script>
	<script src="javascripts/edit-post.js"></script>
	<script src="javascripts/markdown-toolbar.js"></script>
	<script>
			tabIndent.renderAll();  //为textarea添加tabIndent类标识 可使用tab缩进
			var md = window.markdownit({ 
				highlight: function(str, lang){
											if (lang && hljs.getLanguage(lang)) {
							      		try {
							        		return hljs.highlight(lang, str).value;
							      		} catch (__) {}
							    		}
    									return '';
    								} 
    		});			//markdown-it 解析markdown格式 window.markdownit({html: true});
			$("#edit-tabs .preview-node").click(function(){
				   var result = md.render($("#editor").val());
				   $("#previewer").html(result);
				   //console.log(result);
				   $is_previewing = true;
			});
			$("#edit-tabs .edit-node").click(function(){
				   $is_previewing = false;
			});
	</script>
</body>
</html>
